<!DOCTYPE html>
<html>

<head>
  <title>Map of Media Coverage</title>
  <link href="/static/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
  <link href="/static/css/typeahead.css" rel="stylesheet" type="text/css"/>
  <link href="/static/css/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css"/>
</head>

<body>

<div class="container"> 

  <div class="row">

    <div class="span12">
      <h1>Media Coverage</h1>
      <p>We have {{located_story_count}} articles in our database.</p>
    </div>

  </div>

  <div class="row">

    <div class="span12">
      <div id="worldMap" style="width: 900px; height: 500px"></div>
    </div>

  </div>

<div>

<script type="text/javascript" src="/static/js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/typeahead.min.js"></script>
<script type="text/javascript" src="/static/js/jquery-jvectormap-1.2.2.min.js"></script>
<script type="text/javascript" src="/static/js/jquery-jvectormap-world-mill-en.js"></script>

<script type="text/javascript">
var storyCountByCountry = {{count_by_country_json|safe}};
$(function(){
  $('#worldMap').vectorMap({
    map: 'world_mill_en',
    series: {
      regions: [{
        values: storyCountByCountry,
        scale: ['#C8EEFF', '#0071A4'],
        normalizeFunction: 'polynomial'
      }]
    },
    onRegionLabelShow: function(e, el, code){
      el.html(el.html()+' ('+storyCountByCountry[code]+' stories)');
    }
  });
});
</script>

</body>

</html>
